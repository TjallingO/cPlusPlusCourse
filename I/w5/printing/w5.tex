\documentclass[a4paper]{article}
\usepackage[margin=2cm]{geometry}
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhead[CO,CE]{
                  Programming in C/C++ \\
                  Tjalling Otter \& Emiel Krol
                 }

\usepackage{etoolbox}
\usepackage{placeins}
\usepackage{float}
\usepackage{graphicx}

\usepackage[usenames,dvipsnames]{color}  %% Allow color names

% New page for every section
\let\stdsection\section
\renewcommand\section{\newpage\stdsection}

% New page for every subsection
%\let\stdsubsection\subsection
%\renewcommand\subsection{\newpage\stdsubsection}

%% The listings package will format your source code
\usepackage{listings}
\lstdefinestyle{customasm}{
  title=\lstname,
  belowcaptionskip=1\baselineskip,
  language=C++,
  breaklines=true, %% Wrap long lines
  basicstyle=\small\ttfamily,
  commentstyle=\color{Gray},
  stringstyle=\color{Black},
  keywordstyle=\bfseries\color{OliveGreen},
  identifierstyle=\color{blue},
  numbers=left,
  showstringspaces=false
}

\lstdefinestyle{text}{
  title=\lstname,
  belowcaptionskip=1\baselineskip,
  breaklines=true, %% Wrap long lines
  basicstyle=\small\ttfamily,
  showstringspaces=false,
  breakautoindent=true
}

%\newtoggle{aftersection}
%\preto{\lstinputlisting}{\filbreak\global\toggletrue{aftersection}}
%\preto{\subsection}{\iftoggle{aftersection}{\global\togglefalse{aftersection}}{\filbreak}}
%\newcommand{\clearpageafterfirst}{%
%  \gdef\clearpageafterfirst{\clearpage}%
%}

\begin{document}

% Start section already handed in before
\section*{Week 5}

\subsection*{Exercise 40}
\lstinputlisting[style=text]{../40/40.txt}
\begin{figure}[H]
\centerline{\includegraphics[trim={0 0cm 0 0cm}, scale=5]{../40/illustration.pdf}}
\caption{Illustration}
\end{figure}

\newpage
\subsection*{Exercise 41}
\lstinputlisting[style=customasm]{../41/main.cc}

\newpage
\subsection*{Exercise 42}
\lstinputlisting[style=customasm]{../42-3/main.ih}
\lstinputlisting[style=customasm]{../42-3/main.cc}
\lstinputlisting[style=customasm]{../42-3/42.ih}
\lstinputlisting[style=customasm]{../42-3/showChar.cc}
\lstinputlisting[style=customasm]{../42-3/charcount/charcount.h}
\lstinputlisting[style=customasm]{../42-3/charcount/charcount.ih}
\lstinputlisting[style=customasm]{../42-3/charcount/add.cc}
\lstinputlisting[style=customasm]{../42-3/charcount/append.cc}
\lstinputlisting[style=customasm]{../42-3/charcount/charcount.h}
\lstinputlisting[style=customasm]{../42-3/charcount/constructor.cc}
\lstinputlisting[style=customasm]{../42-3/charcount/enlarge.cc}
\lstinputlisting[style=customasm]{../42-3/charcount/insert.cc}
\lstinputlisting[style=customasm]{../42-3/charcount/locate.cc}

\newpage
\subsection*{Exercise 43}
\lstinputlisting[style=text]{../43/43.txt}

\newpage
\subsection*{Exercise 44}
\lstinputlisting[style=customasm]{../44/main.ih}
\lstinputlisting[style=customasm]{../44/main.cc}
\lstinputlisting[style=customasm]{../44/inv_identity.cc}
\lstinputlisting[style=customasm]{../44/allOnes.cc}
\lstinputlisting[style=customasm]{../44/diagZeroes.cc}

% Start new section
\section*{Week 5}
\subsection*{Exercises 45 \& 47}
\lstinputlisting[style=customasm]{../45-47/main.ih}
\lstinputlisting[style=customasm]{../45-47/main.cc}
\lstinputlisting[style=customasm]{../45-47/strings/strings.h}
\lstinputlisting[style=customasm]{../45-47/strings/strings.ih}
\lstinputlisting[style=customasm]{../45-47/strings/addChar.cc}
\lstinputlisting[style=customasm]{../45-47/strings/c_argcargv.cc}
\lstinputlisting[style=customasm]{../45-47/strings/c_default.cc}
\lstinputlisting[style=customasm]{../45-47/strings/c_environ.cc}
\lstinputlisting[style=customasm]{../45-47/strings/c_istream.cc}
\lstinputlisting[style=customasm]{../45-47/strings/stringsSwap.cc}


\end{document}
